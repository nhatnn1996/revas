{"ast":null,"code":"import _objectSpread from \"/Users/fimplus/Desktop/revasReal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/Users/fimplus/Desktop/revasReal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/fimplus/Desktop/revasReal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/fimplus/Desktop/revasReal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/fimplus/Desktop/revasReal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport * as React from 'react';\nimport * as imageLoader from './common/imageLoader';\nimport drawImage from './common/drawImage';\nvar DEFAULT_STYLE = {\n  path: true\n};\n\nvar ImageView = /*#__PURE__*/function (_React$Component) {\n  _inherits(ImageView, _React$Component);\n\n  var _super = _createSuper(ImageView);\n\n  function ImageView() {\n    var _this;\n\n    _classCallCheck(this, ImageView);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      ready: false\n    };\n\n    _this.onReady = function () {\n      _this.setState({\n        ready: true\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ImageView, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.src) {\n        imageLoader.get(this.props.src, this.onReady);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prev) {\n      if (prev.src !== this.props.src) {\n        this.setState({\n          ready: false\n        });\n\n        if (prev.src) {\n          imageLoader.remove(prev.src, this.onReady);\n        }\n\n        if (this.props.src) {\n          imageLoader.get(this.props.src, this.onReady);\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.props.src) {\n        imageLoader.remove(this.props.src, this.onReady);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement('Image', _objectSpread(_objectSpread({\n        customDrawer: this.state.ready ? drawImage : void 0\n      }, this.props), {}, {\n        style: [DEFAULT_STYLE, this.props.style],\n        $ready: this.state.ready\n      }));\n    }\n  }]);\n\n  return ImageView;\n}(React.Component);\n\nexport { ImageView as default };","map":{"version":3,"sources":["/Users/fimplus/Desktop/revasReal/src/revas/components/Image.ts"],"names":["React","imageLoader","drawImage","DEFAULT_STYLE","path","ImageView","state","ready","onReady","setState","props","src","get","prev","remove","createElement","customDrawer","style","$ready","Component"],"mappings":";;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAO,KAAKC,WAAZ,MAA6B,sBAA7B;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AAOA,IAAMC,aAAa,GAAG;AAAEC,EAAAA,IAAI,EAAE;AAAR,CAAtB;;IAEqBC,S;;;;;;;;;;;;;;;UACnBC,K,GAAQ;AACNC,MAAAA,KAAK,EAAE;AADD,K;;UAwBRC,O,GAAU,YAAM;AACd,YAAKC,QAAL,CAAc;AAAEF,QAAAA,KAAK,EAAE;AAAT,OAAd;AACD,K;;;;;;;wCAvBmB;AAClB,UAAI,KAAKG,KAAL,CAAWC,GAAf,EAAoB;AAClBV,QAAAA,WAAW,CAACW,GAAZ,CAAgB,KAAKF,KAAL,CAAWC,GAA3B,EAAgC,KAAKH,OAArC;AACD;AACF;;;uCACkBK,I,EAAW;AAC5B,UAAIA,IAAI,CAACF,GAAL,KAAa,KAAKD,KAAL,CAAWC,GAA5B,EAAiC;AAC/B,aAAKF,QAAL,CAAc;AAAEF,UAAAA,KAAK,EAAE;AAAT,SAAd;;AACA,YAAIM,IAAI,CAACF,GAAT,EAAc;AACZV,UAAAA,WAAW,CAACa,MAAZ,CAAmBD,IAAI,CAACF,GAAxB,EAA6B,KAAKH,OAAlC;AACD;;AACD,YAAI,KAAKE,KAAL,CAAWC,GAAf,EAAoB;AAClBV,UAAAA,WAAW,CAACW,GAAZ,CAAgB,KAAKF,KAAL,CAAWC,GAA3B,EAAgC,KAAKH,OAArC;AACD;AACF;AACF;;;2CACsB;AACrB,UAAI,KAAKE,KAAL,CAAWC,GAAf,EAAoB;AAClBV,QAAAA,WAAW,CAACa,MAAZ,CAAmB,KAAKJ,KAAL,CAAWC,GAA9B,EAAmC,KAAKH,OAAxC;AACD;AACF;;;6BAIQ;AACP,aAAOR,KAAK,CAACe,aAAN,CAAoB,OAApB;AACLC,QAAAA,YAAY,EAAE,KAAKV,KAAL,CAAWC,KAAX,GAAmBL,SAAnB,GAA+B,KAAK;AAD7C,SAEF,KAAKQ,KAFH;AAGLO,QAAAA,KAAK,EAAE,CAACd,aAAD,EAAgB,KAAKO,KAAL,CAAWO,KAA3B,CAHF;AAILC,QAAAA,MAAM,EAAE,KAAKZ,KAAL,CAAWC;AAJd,SAAP;AAMD;;;;EAnCoCP,KAAK,CAACmB,S;;SAAxBd,S","sourcesContent":["import * as React from 'react';\nimport * as imageLoader from './common/imageLoader';\nimport drawImage from './common/drawImage';\nimport { NodeProps } from '../core/Node';\n\nexport type ImageViewProps = {\n  src: string;\n} & NodeProps;\n\nconst DEFAULT_STYLE = { path: true };\n\nexport default class ImageView extends React.Component<ImageViewProps> {\n  state = {\n    ready: false,\n  };\n  componentDidMount() {\n    if (this.props.src) {\n      imageLoader.get(this.props.src, this.onReady);\n    }\n  }\n  componentDidUpdate(prev: any) {\n    if (prev.src !== this.props.src) {\n      this.setState({ ready: false });\n      if (prev.src) {\n        imageLoader.remove(prev.src, this.onReady);\n      }\n      if (this.props.src) {\n        imageLoader.get(this.props.src, this.onReady);\n      }\n    }\n  }\n  componentWillUnmount() {\n    if (this.props.src) {\n      imageLoader.remove(this.props.src, this.onReady);\n    }\n  }\n  onReady = () => {\n    this.setState({ ready: true });\n  };\n  render() {\n    return React.createElement('Image', {\n      customDrawer: this.state.ready ? drawImage : void 0,\n      ...this.props,\n      style: [DEFAULT_STYLE, this.props.style],\n      $ready: this.state.ready,\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}
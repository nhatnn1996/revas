{"ast":null,"code":"import _classCallCheck from \"/Users/fimplus/Desktop/revasReal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/fimplus/Desktop/revasReal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/fimplus/Desktop/revasReal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/fimplus/Desktop/revasReal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/fimplus/Desktop/revasReal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/fimplus/Desktop/revasReal/src/develop/common/simple-router.tsx\";\nimport * as React from 'react';\nimport { View, AnimatedValue, timing } from '../../revas';\n\nvar SimpleRouter = /*#__PURE__*/function (_React$Component) {\n  _inherits(SimpleRouter, _React$Component);\n\n  var _super = _createSuper(SimpleRouter);\n\n  function SimpleRouter() {\n    var _this;\n\n    _classCallCheck(this, SimpleRouter);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      animating: 0\n    };\n    _this.pages = [_this.props.children];\n    _this.animated = new AnimatedValue(0);\n    _this.style = {\n      first: {\n        translateX: _this.animated.interpolate([0, 1], [0, _this.props.width]),\n        animated: true\n      },\n      second: {\n        opacity: _this.animated.interpolate([0, 1], [0.7, 1]),\n        scale: _this.animated.interpolate([0, 1], [0.9, 1]),\n        animated: true\n      },\n      others: {\n        opacity: 0\n      }\n    };\n\n    _this.push = function (Component) {\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _this.pages.push( /*#__PURE__*/React.createElement(Component, Object.assign({}, params, {\n        router: _assertThisInitialized(_this),\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 21\n        }\n      })));\n\n      _this.animated.setValue(1);\n\n      _this.setState({\n        animating: -1\n      });\n\n      requestAnimationFrame(_this._pushAnim);\n    };\n\n    _this._pushAnim = function () {\n      _this.setState({\n        animating: 1\n      });\n\n      timing(_this.animated, {\n        to: 0,\n        duration: 200\n      }).start(_this._pushAnimDone);\n    };\n\n    _this._pushAnimDone = function () {\n      return _this.setState({\n        animating: 0\n      });\n    };\n\n    _this.pop = function () {\n      _this.setState({\n        animating: 1\n      });\n\n      _this.animated.setValue(0);\n\n      timing(_this.animated, {\n        to: 1,\n        duration: 200\n      }).start(_this._popAnimDone);\n    };\n\n    _this._popAnimDone = function () {\n      _this.pages.pop();\n\n      _this.setState({\n        animating: 0\n      });\n    };\n\n    _this.id = 0;\n\n    _this.renderPage = function (page, index, pages) {\n      var animating = _this.state.animating;\n      var isLast = index === pages.length - 1;\n      var id = isLast && animating > 0 ? \"pages_anim_\".concat(_this.id++) : false;\n      return /*#__PURE__*/React.createElement(View, {\n        key: index,\n        cache: !isLast || id,\n        forceCache: true,\n        pointerEvents: animating ? 'none' : 'auto',\n        style: animating ? [styles.page, _this.getStyle(index, pages)] : styles.page,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 7\n        }\n      }, page);\n    };\n\n    return _this;\n  }\n\n  _createClass(SimpleRouter, [{\n    key: \"getStyle\",\n    value: function getStyle(index, pages) {\n      if (index === pages.length - 1) {\n        return this.style.first;\n      }\n\n      if (index === pages.length - 2) {\n        return this.style.second;\n      }\n\n      return this.style.others;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.pages.map(this.renderPage);\n    }\n  }]);\n\n  return SimpleRouter;\n}(React.Component);\n\nexport { SimpleRouter as default };\nvar styles = {\n  page: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    backgroundColor: '#fff'\n  }\n};","map":{"version":3,"sources":["/Users/fimplus/Desktop/revasReal/src/develop/common/simple-router.tsx"],"names":["React","View","AnimatedValue","timing","SimpleRouter","state","animating","pages","props","children","animated","style","first","translateX","interpolate","width","second","opacity","scale","others","push","Component","params","setValue","setState","requestAnimationFrame","_pushAnim","to","duration","start","_pushAnimDone","pop","_popAnimDone","id","renderPage","page","index","isLast","length","styles","getStyle","map","position","left","right","top","bottom","backgroundColor"],"mappings":";;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,IAAT,EAAeC,aAAf,EAA8BC,MAA9B,QAA4C,aAA5C;;IAMqBC,Y;;;;;;;;;;;;;;;UACnBC,K,GAAQ;AACNC,MAAAA,SAAS,EAAE;AADL,K;UAIRC,K,GAA2B,CAAC,MAAKC,KAAL,CAAWC,QAAZ,C;UAE3BC,Q,GAAW,IAAIR,aAAJ,CAAkB,CAAlB,C;UAEXS,K,GAAQ;AACNC,MAAAA,KAAK,EAAE;AACLC,QAAAA,UAAU,EAAE,MAAKH,QAAL,CAAcI,WAAd,CAA0B,CAAC,CAAD,EAAI,CAAJ,CAA1B,EAAkC,CAAC,CAAD,EAAI,MAAKN,KAAL,CAAWO,KAAf,CAAlC,CADP;AAELL,QAAAA,QAAQ,EAAE;AAFL,OADD;AAKNM,MAAAA,MAAM,EAAE;AACNC,QAAAA,OAAO,EAAE,MAAKP,QAAL,CAAcI,WAAd,CAA0B,CAAC,CAAD,EAAI,CAAJ,CAA1B,EAAkC,CAAC,GAAD,EAAM,CAAN,CAAlC,CADH;AAENI,QAAAA,KAAK,EAAE,MAAKR,QAAL,CAAcI,WAAd,CAA0B,CAAC,CAAD,EAAI,CAAJ,CAA1B,EAAkC,CAAC,GAAD,EAAM,CAAN,CAAlC,CAFD;AAGNJ,QAAAA,QAAQ,EAAE;AAHJ,OALF;AAUNS,MAAAA,MAAM,EAAE;AACNF,QAAAA,OAAO,EAAE;AADH;AAVF,K;;UAeRG,I,GAAO,UAACC,SAAD,EAAsC;AAAA,UAArBC,MAAqB,uEAAP,EAAO;;AAC3C,YAAKf,KAAL,CAAWa,IAAX,eAAgB,oBAAC,SAAD,oBAAeE,MAAf;AAAuB,QAAA,MAAM,+BAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAhB;;AACA,YAAKZ,QAAL,CAAca,QAAd,CAAuB,CAAvB;;AACA,YAAKC,QAAL,CAAc;AAAElB,QAAAA,SAAS,EAAE,CAAC;AAAd,OAAd;;AACAmB,MAAAA,qBAAqB,CAAC,MAAKC,SAAN,CAArB;AACD,K;;UAEDA,S,GAAY,YAAM;AAChB,YAAKF,QAAL,CAAc;AAAElB,QAAAA,SAAS,EAAE;AAAb,OAAd;;AACAH,MAAAA,MAAM,CAAC,MAAKO,QAAN,EAAgB;AACpBiB,QAAAA,EAAE,EAAE,CADgB;AAEpBC,QAAAA,QAAQ,EAAE;AAFU,OAAhB,CAAN,CAGGC,KAHH,CAGS,MAAKC,aAHd;AAID,K;;UAEDA,a,GAAgB;AAAA,aAAM,MAAKN,QAAL,CAAc;AAAElB,QAAAA,SAAS,EAAE;AAAb,OAAd,CAAN;AAAA,K;;UAEhByB,G,GAAM,YAAM;AACV,YAAKP,QAAL,CAAc;AAAElB,QAAAA,SAAS,EAAE;AAAb,OAAd;;AACA,YAAKI,QAAL,CAAca,QAAd,CAAuB,CAAvB;;AACApB,MAAAA,MAAM,CAAC,MAAKO,QAAN,EAAgB;AACpBiB,QAAAA,EAAE,EAAE,CADgB;AAEpBC,QAAAA,QAAQ,EAAE;AAFU,OAAhB,CAAN,CAGGC,KAHH,CAGS,MAAKG,YAHd;AAID,K;;UAEDA,Y,GAAe,YAAM;AACnB,YAAKzB,KAAL,CAAWwB,GAAX;;AACA,YAAKP,QAAL,CAAc;AAAElB,QAAAA,SAAS,EAAE;AAAb,OAAd;AACD,K;;UAYD2B,E,GAAK,C;;UAELC,U,GAAa,UAACC,IAAD,EAAwBC,KAAxB,EAAuC7B,KAAvC,EAAoE;AAAA,UACvED,SADuE,GACzD,MAAKD,KADoD,CACvEC,SADuE;AAE/E,UAAM+B,MAAM,GAAGD,KAAK,KAAK7B,KAAK,CAAC+B,MAAN,GAAe,CAAxC;AACA,UAAML,EAAE,GAAGI,MAAM,IAAI/B,SAAS,GAAG,CAAtB,wBAAwC,MAAK2B,EAAL,EAAxC,IAAsD,KAAjE;AACA,0BACE,oBAAC,IAAD;AACE,QAAA,GAAG,EAAEG,KADP;AAEE,QAAA,KAAK,EAAE,CAACC,MAAD,IAAWJ,EAFpB;AAGE,QAAA,UAAU,MAHZ;AAIE,QAAA,aAAa,EAAE3B,SAAS,GAAG,MAAH,GAAY,MAJtC;AAKE,QAAA,KAAK,EAAEA,SAAS,GAAG,CAACiC,MAAM,CAACJ,IAAR,EAAc,MAAKK,QAAL,CAAcJ,KAAd,EAAqB7B,KAArB,CAAd,CAAH,GAAgDgC,MAAM,CAACJ,IALzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOGA,IAPH,CADF;AAWD,K;;;;;;;6BA3BQC,K,EAAe7B,K,EAAc;AACpC,UAAI6B,KAAK,KAAK7B,KAAK,CAAC+B,MAAN,GAAe,CAA7B,EAAgC;AAC9B,eAAO,KAAK3B,KAAL,CAAWC,KAAlB;AACD;;AACD,UAAIwB,KAAK,KAAK7B,KAAK,CAAC+B,MAAN,GAAe,CAA7B,EAAgC;AAC9B,eAAO,KAAK3B,KAAL,CAAWK,MAAlB;AACD;;AACD,aAAO,KAAKL,KAAL,CAAWQ,MAAlB;AACD;;;6BAqBQ;AACP,aAAO,KAAKZ,KAAL,CAAWkC,GAAX,CAAe,KAAKP,UAApB,CAAP;AACD;;;;EAtFuClC,KAAK,CAACqB,S;;SAA3BjB,Y;AAyFrB,IAAMmC,MAAM,GAAG;AACbJ,EAAAA,IAAI,EAAE;AACJO,IAAAA,QAAQ,EAAE,UADN;AAEJC,IAAAA,IAAI,EAAE,CAFF;AAGJC,IAAAA,KAAK,EAAE,CAHH;AAIJC,IAAAA,GAAG,EAAE,CAJD;AAKJC,IAAAA,MAAM,EAAE,CALJ;AAMJC,IAAAA,eAAe,EAAE;AANb;AADO,CAAf","sourcesContent":["import * as React from 'react';\nimport { View, AnimatedValue, timing } from '../../revas';\n\nexport interface SimpleRouterProps {\n  width: number;\n}\n\nexport default class SimpleRouter extends React.Component<SimpleRouterProps> {\n  state = {\n    animating: 0,\n  };\n\n  pages: React.ReactNode[] = [this.props.children];\n\n  animated = new AnimatedValue(0);\n\n  style = {\n    first: {\n      translateX: this.animated.interpolate([0, 1], [0, this.props.width]),\n      animated: true,\n    },\n    second: {\n      opacity: this.animated.interpolate([0, 1], [0.7, 1]),\n      scale: this.animated.interpolate([0, 1], [0.9, 1]),\n      animated: true,\n    },\n    others: {\n      opacity: 0,\n    },\n  };\n\n  push = (Component: any, params: any = {}) => {\n    this.pages.push(<Component {...params} router={this} />);\n    this.animated.setValue(1);\n    this.setState({ animating: -1 });\n    requestAnimationFrame(this._pushAnim);\n  };\n\n  _pushAnim = () => {\n    this.setState({ animating: 1 });\n    timing(this.animated, {\n      to: 0,\n      duration: 200,\n    }).start(this._pushAnimDone);\n  };\n\n  _pushAnimDone = () => this.setState({ animating: 0 });\n\n  pop = () => {\n    this.setState({ animating: 1 });\n    this.animated.setValue(0);\n    timing(this.animated, {\n      to: 1,\n      duration: 200,\n    }).start(this._popAnimDone);\n  };\n\n  _popAnimDone = () => {\n    this.pages.pop();\n    this.setState({ animating: 0 });\n  };\n\n  getStyle(index: number, pages: any[]) {\n    if (index === pages.length - 1) {\n      return this.style.first;\n    }\n    if (index === pages.length - 2) {\n      return this.style.second;\n    }\n    return this.style.others;\n  }\n\n  id = 0;\n\n  renderPage = (page: React.ReactNode, index: number, pages: React.ReactNode[]) => {\n    const { animating } = this.state;\n    const isLast = index === pages.length - 1;\n    const id = isLast && animating > 0 ? `pages_anim_${this.id++}` : false;\n    return (\n      <View\n        key={index}\n        cache={!isLast || id}\n        forceCache\n        pointerEvents={animating ? 'none' : 'auto'}\n        style={animating ? [styles.page, this.getStyle(index, pages)] : styles.page}\n      >\n        {page}\n      </View>\n    );\n  };\n\n  render() {\n    return this.pages.map(this.renderPage);\n  }\n}\n\nconst styles = {\n  page: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    backgroundColor: '#fff',\n  },\n};\n"]},"metadata":{},"sourceType":"module"}